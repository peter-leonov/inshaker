<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width"/>
	<title>tests for Cookie</title>
	<script src="tests.common.js"></script>
	
	<script src="../src/core/prototype.js"></script>
	<script src="../src/modules/cookie.js"></script>
</head>
<body>
<script>
Tests.test(function (t)
{
	t.test('single name', function (t)
	{
		Cookie.erase('single-name')
		Cookie.set('single-name')
		t.eq(Cookie.get('single-name'), 'undefined', '"undefined"')
	})
	
	t.test('name and value', function (t)
	{
		Cookie.erase('name-value')
		Cookie.set('name-value', 'asdf123')
		t.eq(Cookie.get('name-value'), 'asdf123', '"asdf123"')
	})
	
	t.test('erase', function (t)
	{
		Cookie.set('erase-one', 'asdf123')
		t.eq(Cookie.get('erase-one'), 'asdf123', 'erase-one')
		Cookie.erase('erase-one')
		t.eq(Cookie.get('erase-one'), null, 'erase-one')
		
		Cookie.set('erase-two', 'asdf123', +new Date() + 3000)
		Cookie.erase('erase-two')
		t.eq(Cookie.get('erase-two'), null, 'erase-two')
	})
	
	t.test('expires', function (t)
	{
		Cookie.erase('expires-one')
		Cookie.set('expires-one', 'blabla', +new Date() + 3000)
		t.eq(Cookie.get('expires-one'), 'blabla', 'just after')
		
		t.async(function (t) { t.eq(Cookie.get('expires-one'), 'blabla', '"1s later"')  }, 1000)
		t.async(function (t) { t.eq(Cookie.get('expires-one'), null, '5s late (expired)'); t.done() }, 5000)
		
		t.wait(10000)
	})
})
</script>
</body>
</html>