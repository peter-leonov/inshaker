<!DOCTYPE html>
<html lang="ru">
<head>
	<link rel="stylesheet" href="/t/light/light.css"/>
	<link rel="stylesheet" href="/t/branding/shakeit/branding.css"/>
	<title>Статистика по браузерам — Inshaker</title>
	<style>
	.stat { position: relative; margin: 20px -20px 0 -20px; }
	.stat .viewport { position: relative; width: 100%; height: 770px; overflow: hidden; }
	.stat .viewport .point { width: 100%; height: 100%; }
	.stat .prev,
	.stat .next { position: absolute; top: 4px; z-index: 11; }
	.stat .prev { left: 890px; }
	.stat .next { right: 0px; }
	.stat h3 { text-align: right; width: 150px; margin: 0 38px 0 auto; }
	</style>
</head>
<body>
<!--# include virtual="/inc/common-top.html" -->
<div id="common-main-wrapper">

<div id="main-column" class="common-box"><div class="common-content">
	<div class="common-title">
		<h1>Статистика по браузерам за 30 дней</h1>
	</div>
	<div class="b-content">
		<div class="stat cocktail-list" id="rolling-stats">
			<ul class="viewport">
				<li class="point">
					<h3>детально</h3>
					<div id="stat-browsers"></div>
				</li>
				<li class="point">
					<h3>общо</h3>
					<div id="stat-browsers-plain"></div>
				</li>
			</ul>
			<a class="prev"></a>
			<a class="next"></a>
		</div>
		
	</div>
</div></div>

</div id="common-main-wrapper">

<!--# include virtual="/inc/common-footer.html" -->
<script src="/js/common/oops.js"></script>
<script src="/js/common/common.js"></script>
<script>

function drawCharts (browserStats, browserPlainStats)
{
	drawChartToNode($('#stat-browsers'), browserStats)
	drawChartToNode($('#stat-browsers-plain'), browserPlainStats)
}

function drawChartToNode (node, data)
{
	var visual = google.visualization
	
	var dataPie = new visual.DataTable()
	dataPie.addColumn('string', 'Browser')
	dataPie.addColumn('number', 'Slices')
	dataPie.addRows(data.data)
	
	var optionsPie =
	{
		height: 822,
		width: 960,
		colors: data.colors,
		backgroundColor: 'none',
		pieSliceText: 'label',
		pieSliceTextStyle:
		{
			fontSize: 11
		},
		chartArea:
		{
			top: 30,
			left: 1,
			height: 670,
			width: 960
		},
		legend:
		{
			position: 'none'
		},
		sliceVisibilityThreshold: 0
	}
	
	var chartPie = new visual.PieChart(node)
	chartPie.draw(dataPie, optionsPie)
	
	var iframe = node.firstChild.contentDocument.body,
		link = document.createElement('link')
	
	link.href = '/t/geeks/stat.css'
	link.rel = 'stylesheet'
	
	iframe.appendChild(link)
}

function onready ()
{
	var opts =
	{
		packages: ["corechart"]
	}
	
	googleApiLoader.addEventListener('visualization', function (e) { drawCharts(BrowsersStats.getChartData(), BrowsersStats.getChartDataPlain()) }, false)
	googleApiLoader.load('visualization', 1, opts)
	
	new RollingImagesLite($('#rolling-stats'), {animationType: 'directJump'})
}
$.onready(onready)

<!--# include virtual="/liby/modules/motion.js" -->
<!--# include virtual="/liby/modules/motion-types.js" -->
<!--# include virtual="/liby/modules/animation.js" -->
<!--# include virtual="/js/common/rolling-images.js" -->

<!--# include virtual="/liby/modules/google-api-loader.js" -->
<!--# include virtual="/js/common/google.js" -->

<!--# include virtual="/js/geeks/stat.js" -->

</script>
</body>
</html>
