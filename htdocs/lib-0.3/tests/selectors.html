<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width"/>
	<title>Looking for selectors support</title>
	<script src="tests.common.js" type="text/javascript"></script>
	
	<!--[if lte IE 7]><script type="text/javascript" src="../src/core/fixes/trident3.js"></script><![endif]-->
	<!--[if lte IE 7]><script type="text/javascript" src="../src/core/fixes/trident3-selectors.js"></script><![endif]-->
	<!--[if lte IE 8]><script>document.createElement('blablabla'); document.createElement('ololo')</script><![endif]-->
	<!--[if gte IE 8]><script type="text/javascript" src="../src/core/fixes/trident4.js"></script><![endif]-->
	<script type="text/javascript" src="../src/core/prototype.js"></script>
</head>
<body>
<blablabla class="blablabla-class" id="blablabla1"></blablabla>
<blablabla class="blablabla-class" id="blablabla2"></blablabla>
<ololo id="ololo1"></ololo>
<ololo id="ololo2"></ololo>
<div class="iii" id="iii1">
	<i id="i1"></i>
	<i id="i2"></i>
	<i id="i3"></i>
	<i id="i4"></i>
</div>
<i id="i5"></i>
<script type="text/javascript">
function $ (id) { return document.getElementById(id) }
function toArray (list) { var arr = []; for (var i = 0, il = list.length; i < il; i++) arr[i] = list[i]; return arr }
Tests.test(function (t)
{
	t.test('plain checks', function (t)
	{
		t.ok(document.querySelectorAll, 'document.querySelectorAll')
		t.ok(document.querySelector, 'document.querySelector')
	})
	
	t.test('absolute', function (t)
	{
		t.like(toArray(document.querySelectorAll('body i')), [$('i1'), $('i2'), $('i3'), $('i4'), $('i5')], 'i')
		t.like(toArray(document.querySelectorAll('i')), [$('i1'), $('i2'), $('i3'), $('i4'), $('i5')], 'i')
		t.like(toArray(document.querySelectorAll('div.iii i')), [$('i1'), $('i2'), $('i3'), $('i4')], 'div.iii i')
		t.like(toArray(document.querySelectorAll('#iii1 i')), [$('i1'), $('i2'), $('i3'), $('i4')], '#iii1 i')
	})
	
	t.test('relative', function (t)
	{
		var node = $('iii1')
		t.like(toArray(node.querySelectorAll('body i')), [$('i1'), $('i2'), $('i3'), $('i4')], 'i')
		t.like(toArray(node.querySelectorAll('i')), [$('i1'), $('i2'), $('i3'), $('i4')], 'i')
		t.like(toArray(node.querySelectorAll('div.iii i')), [$('i1'), $('i2'), $('i3'), $('i4')], 'div.iii i')
		t.like(toArray(node.querySelectorAll('#iii1 i')), [$('i1'), $('i2'), $('i3'), $('i4')], '#iii1 i')
	})
	
	t.test('unknown tags', function (t)
	{
		t.eq(document.querySelector('blablabla'), $('blablabla1'), 'blablabla')
		t.eq(document.querySelector('#blablabla1'), $('blablabla1'), '#blablabla1')
		t.eq(document.querySelector('ololo'), $('ololo1'), 'ololo')
		t.eq(document.querySelector('#ololo1'), $('ololo1'), '#ololo1')
		
		t.like(toArray(document.querySelectorAll('blablabla')), [$('blablabla1'), $('blablabla2')], 'blablabla')
		t.like(toArray(document.querySelectorAll('ololo')), [$('ololo1'), $('ololo2')], 'ololo')
		
		t.like(toArray(document.querySelectorAll('.blablabla-class')), [$('blablabla1'), $('blablabla2')], '.blablabla')
	})
})
</script>
</body>
</html>