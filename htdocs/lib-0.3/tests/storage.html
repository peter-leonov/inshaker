<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width"/>
	<title>tests for Storage</title>
	<script src="tests.common.js" type="text/javascript"></script>
	
	<script type="text/javascript" src="../src/modules/storage.js"></script>
</head>
<body>
<script type="text/javascript">
Tests.test(function (t)
{
	t.test('prerequisites', function (t)
	{
		t.mayFail()
		
		t.ok(window.localStorage, 'localStorage')
		t.ok(window.globalStorage, 'globalStorage')
		t.ok(document.body.addBehavior, 'addBehavior')
	})
	
	t.test('simple', function (t)
	{
		if (!t.ok(Storage.bind(), 'bind()'))
		{
			t.log('no need for further testing')
		}
		
		function ready ()
		{
			Storage.set('a', 1)
			t.eq(Storage.get('a'), 1, 'get')
			
			t.done()
		}
		
		Storage.ready(t.wrap(ready))
		
		t.wait(10000)
	})
	
})
</script>
</body>
</html>